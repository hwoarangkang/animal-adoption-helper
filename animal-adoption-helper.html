<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動物收容所查詢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .animal-card {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .animal-card.selected {
            background-color: #f0f0f0;
        }
        .animal-card:hover {
            transform: translateY(-2px);
        }
        .search-form {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="search-form">
        <select id="areaSelect">
            <option value="">所有地區</option>
            <option value="100">台北市</option>
            <option value="101">新北市</option>
            <option value="102">桃園市</option>
            <option value="103">台中市</option>
            <option value="104">台南市</option>
            <option value="105">高雄市</option>
            <option value="106">基隆市</option>
            <option value="107">宜蘭縣</option>
            <option value="108">苗栗縣</option>
            <option value="109">南投縣</option>
            <option value="110">彰化縣</option>
            <option value="111">新竹市</option>
            <option value="112">嘉義市</option>
        </select>
        
        <select id="speciesSelect">
            <option value="">所有品種</option>
            <option value="貓">貓</option>
            <option value="狗">狗</option>
            <option value="兔子">兔子</option>
            <option value="rats"> крысы</option>
            <!-- 可以根據實際資料添加更多 -->
        </select>

        <select id="colorSelect">
            <option value="">所有顏色</option>
            <option value="black">黑色</option>
            <option value="white">白色</option>
            <option value="brown">棕色</option>
            <option value="gray">灰色</option>
            <option value="mixed">混色</option>
        </select>

        <select id="genderSelect">
            <option value="">所有性別</option>
            <option value="M">男生</option>
            <option value="F">女生</option>
        </select>

        <button onclick="loadAnimals()">搜索</button>
    </div>

    <div id="selectedCount">已選擇 0 隻動物</div>
    <div id="gallery"></div>
    
    <div style="margin-top: 20px;">
        <h3>產生報告:</h3>
        <textarea id="reportOutput" rows="10" readonly></textarea>
    </div>

    <script>
        let allAnimals = [];
        let selectedAnimals = [];

        // 初始化地區下拉選單
        const areaSelect = document.getElementById('areaSelect');
        areaSelect.addEventListener('change', loadAnimals);

        // 初始化品種下拉選單
        const speciesSelect = document.getElementById('speciesSelect');
        speciesSelect.addEventListener('change', loadAnimals);

        // 初始化顏色下拉選單
        const colorSelect = document.getElementById('colorSelect');
        colorSelect.addEventListener('change', loadAnimals);

        // 初始化性別下拉選單
        const genderSelect = document.getElementById('genderSelect');
        genderSelect.addEventListener('change', loadAnimals);

        function loadAnimals() {
            const area = areaSelect.value;
            const species = speciesSelect.value;
            const color = colorSelect.value;
            const gender = genderSelect.value;

            fetch(`https://example.com/api/animals?area=${area}&species=${species}&color=${color}&gender=${gender}`)
                .then(response => response.json())
                .then(data => {
                    allAnimals = data;
                    displayAnimals();
                })
                .catch(error => console.error('錯誤:', error));
        }

        function displayAnimals() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';

            allAnimals.forEach(animal => {
                const card = document.createElement('div');
                card.className = `animal-card ${selectedAnimals.includes(animal.id) ? 'selected' : ''}`;
                card.innerHTML = `
                    <h4>${animal.name}</h4>
                    <p>地區: ${animal.area}</p>
                    <p>品種: ${animal.species}</p>
                    <p>顏色: ${animal.color}</p>
                    <p>性別: ${animal.gender}</p>
                    <p>出生日期: ${animal.birthdate}</p>
                    <p>入所日期: ${animal.entryDate}</p>
                `;
                card.onclick = () => toggleSelect(animal.id);
                gallery.appendChild(card);
            });
        }

        function toggleSelect(id) {
            const index = selectedAnimals.indexOf(id);
            if (index === -1) {
                selectedAnimals.push(id);
            } else {
                selectedAnimals.splice(index, 1);
            }
            document.getElementById('selectedCount').textContent = `已選擇 ${selectedAnimals.length} 隻動物`;
        }

        function generateReport() {
            const report = [];
            allAnimals.forEach(animal => {
                if (selectedAnimals.includes(animal.id)) {
                    report.push(`
                        === 動物報告 ===
                        名稱: ${animal.name}
                        地區: ${animal.area}
                        品種: ${animal.species}
                        顏色: ${animal.color}
                        性別: ${animal.gender}
                        出生日期: ${animal.birthdate}
                        入所日期: ${animal.entryDate}
                        ----------------
                    `);
                }
            });
            const output = document.getElementById('reportOutput');
            output.value = report.join('\n');
        }

        // 初始化時載入所有動物資料
        loadAnimals();
    </script>
</body>
</html>
